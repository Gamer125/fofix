#summary How to set up required source modules to compile FoFiX
#labels Featured,Phase-Implementation

=Checking out the latest code anonymously=
(requires a Subversion client, such as [http://tortoisesvn.net/ TortoiseSVN], to check out and receive easy updates of the latest FoFiX source code)

_(Note - it is recommended that you download the latest "full" release of FoFiX for your operating system, extract it where you want, and test it first.  This folder now has all the required dependencies for you to rebuild and recompile the source into FretsOnFire.exe and library.zip -- this should also be the folder you perform the "SVN Checkout" and "SVN Update" on!)_

*More detailed instructions can be found [http://www.fretsonfire.net/forums/viewtopic.php?f=11&t=30709&p=315847#p315846 here] if this Wiki does not make sense.*

[http://www.fretsonfire.net/forums/viewtopic.php?f=11&t=30709&p=315847#p315846 http://i374.photobucket.com/albums/oo189/ze_raph/svn-win.png]

Perform an "SVN Checkout" on the following URL to a local folder of your choosing: 
{{{http://fofix.googlecode.com/svn/MFH-Mod/trunk/}}}

Then, to check for and update to the very latest FoFiX alpha source code, perform an "SVN Update" on the folder where you checked out the source files.  

=Setting Up FoFiX Sources=
  * [http://code.google.com/p/fofix/wiki/RequiredSourceModules#For_GNU/Linux GNU/Linux]
  * [http://code.google.com/p/fofix/wiki/RequiredSourceModules#For_Windows Windows]

_Instructions for MacOS X welcome!_
----

_It is highly recommended that when you become an Alpha tester, you keep a separate FoFiX folder containing a full install of the latest stable release - as the Alpha versions' new features and bugfixes might cause other issues affecting playability._


==For Windows==

===Download===

Versions are likely important. Don't substitute one for the other without trying the original versions first. These versions were tested, yours were not. I will not answer questions unless you have done the things in this document.

  # Download Active Python 2.4.3.12 (not the standard python distro) - [http://downloads.activestate.com/ActivePython/windows/2.4/ActivePython-2.4.3.12-win32-x86.msi] or [http://www.mediafire.com/?2zz5mzoybuw]
  # Download Psyco optimizing compiler 1.5.2 - [http://downloads.sourceforge.net/psyco/psyco-1.5.2.win32-py2.4.exe]
  # Download GLEW 1.4.0 - [http://downloads.sourceforge.net/glew/glew-1.4.0-win32.zip]
  # Download PyOpenGL 2.0.2.01 - [http://downloads.sourceforge.net/pyopengl/PyOpenGL-2.0.2.01.py2.4-numpy23.exe]
  # Download GLEWpy 0.7.4 - [http://downloads.sourceforge.net/glewpy/glewpy-0.7.4.win32-py2.4.exe]
  # Download PyGame 1.7.1 - [http://www.pygame.org/ftp/pygame-1.7.1release.win32-py2.4.exe]
  # Download PIL 1.1.6 - [http://effbot.org/downloads/PIL-1.1.6.win32-py2.4.exe]
  # Download Numeric 2.4.2 - [http://downloads.sourceforge.net/numpy/Numeric-24.2.win32-py2.4.exe]
  # *ONLY for FoFiX 3.025 or earlier* -- Download Amanith 0.3 - [http://fretsonfire.phonotheque.ca/setup_amanith_03.rar]
  # *ONLY for FoFiX 3.025 or earlier* -- Download PyAmanith 0.3.34 - [http://muksuluuri.ath.cx/~skyostil/projects/pyamanith/dist/PyAmanith-0.3.34.win32-py2.4.exe]
  # Download PyOgg 1.3 (this url is important, other versions dont work) - [http://thomas.paviot.free.fr/soya/pyogg-1.3.win32-py2.4.exe]
  # Download PyVorbis 1.4 (this URL is important, other versions don't work) - [http://thomas.paviot.free.fr/soya/pyvorbis-1.4.win32-py2.4.exe]
  # Download py2exe 0.6.6 - [http://downloads.sourceforge.net/py2exe/py2exe-0.6.6.win32-py2.4.exe]
  # Download the FoFiX source files from the trunk, or SVN revision / tag of your choice - [http://code.google.com/p/fofix/source/browse/MFH-Mod]

*Or here's a complete package with all the files above, with a batch file that installs everything for Windows 32-bit users (installation lines included for Amanith but are commented out), in a single RAR archive - courtesy of Chris Paiano (Myfingershurt):
[http://www.mediafire.com/?xdg2jriv2tn]

*Or here's a complete package with all the files above, Courtesy of Worldrave*:
[http://www.mediafire.com/download.php?vgnwumi4yzn]

*Or w/o Amanith files (Not needed anymore after version 3.030+. Also 10Mb Less in size)* [http://www.mediafire.com/download.php?mmz3zjqkohm]

*Additional, optional modules currently in use with the latest Alpha version:*
  * [http://trac2.assembla.com/pkaudio/wiki/pyrtmidi pyRtMidi] - for MIDI instruments to be used as controller inputs
  * [http://www.mediafire.com/stump jsPitchBend] - for a whammy pitchbend effect (source: [https://svn.stump.jstump.com/svnroot/pitchbend/trunk SVN Checkout], [https://svn.stump.jstump.com/websvn WebSVN]).  At least revision 7 or release 0.1 is needed for the effect to work.  ([http://www.mediafire.com/?3mgtxhagijt direct download of latest release])
  * [http://www.pysqlite.org/ PySQLite] is needed for metadata caching, which can speed up loading of large song folders.  ([http://oss.itsystementwicklung.de/download/pysqlite/2.5/2.5.1/pysqlite-2.5.1.win32-py2.4.exe direct download])


===Install In This Order===

  #  Install active python by double clicking the .msi
  #  Install psyco by double clicking the .exe
  #  Unzip GLEW (no easy install)
  #  Install glew by copying the 'glew32.dll' file in 'bin' to your 'system32' dir under C:\Windows (or equivalent)   _*64bit OS users - Copy to 'C:\Windows' instead of '\system32'*_
  #  Install PyOpenGL by double clicking the .exe
  #  Install GLEWpy by double clicking the .exe
  #  Install PyGame by double clicking the .exe
  #  Install PIL by double clicking the .exe
  #  Install Numeric by double clicking the .exe
  # *ONLY for FoFiX 3.025 or earlier* -- Install Amanith by double clicking the .exe
  # *ONLY for FoFiX 3.025 or earlier* -- Select reboot later
  # *ONLY for FoFiX 3.025 or earlier* -- Install PyAmanith by double clicking the .exe
  # Install Pyogg by double clicking the .exe
  # Install Pyvorbis by double clicking the .exe
  # Install py2exe by double clicking the .exe
  # Install any optional modules by double clicking the .exe files in the order that you downloaded them.

_This next part fixes a opengl/py2exe bug so it may not be necessary in the future. Only if you get an error when running the FretsOnFire.exe that says:_

{{{
IOError: [Errno 2] No such file or directory: 'D:\\Games\\Frets on Fire\\dist\\data\\library.zip\\OpenGL\\version'
}}}
  # Go to your Python directory and go into the `Lib` and then `site-packages` directory
  # Go into the `OpenGL` directory and edit the file called `__init__.py`
  # Replace the line that reads:
    `__version__ = string.strip(open(filename).read())` *with*
    `__version__ = '2.0.2.01'`
  # Save this file
  # Delete `__init__.pyc` and `__init__.pyo` in the same directory

Back to what we were initially trying:
  # Locate the downloaded or checked-out FoFiX sources
  # Move the {{{src}}} directory into your FoFiX directory (same place as the {{{data}}} directory) if it is not already located there. *NOT _inside_ the {{{data}}} directory!!*
  # *ONLY for FoFiX 3.025 or earlier* -- *REBOOT* _(required)_
  # Open a command prompt
  # cd to the new {{{src}}} directory in your FoFiX directory
  # type {{{python FretsOnFire.py}}} (or run the {{{src\scripts\RunFofFromSources.bat}}} script)

At this point you should be able to play frets on fire directly from the source.

*New Method of Rebuilding The Executable*
Assuming you have TortoiseSVN installed in {{{C:\Program Files\TortoiseSVN\}}}, and assuming you have your Python 2.4's path included in the environment PATH variable, you should be able to use the following one-step Auto SVN Update / Rebuild / Play script:
{{{src\scripts\Win_Alpha_UpdateRebuildPlay.bat}}}

Note that you might not see any errors using this method; if things aren't working correctly, or if the game is not starting, try the below old method.

*Old Method of Rebuilding The Executable*
To create the executable we need a few more steps:
  # Go to your {{{src\scripts}}} directory where you have your SVN directory setup (IE- {{{C:\FoFiX SVN\src\scripts}}})
  # Double-click on the {{{RebuildWin.bat}}} script.  This will recompile and rebuild the game {{{.EXE}}} file, {{{library.zip}}}, and required Python support modules ({{{.PYD}}} files).  This script will also retrieve these files and replace the old files in your FoFiX and data folders, as well as copy over any {{{.DLL}}} files that the build process decided to include.  Then the intermediate files (in {{{src\build}}} and {{{dist\}}}) will automatically be cleaned up.
  # You may need the Windows support files for FoFiX (mostly {{{.DLL}}}s), which can be found inside any full Windows FoFiX distribution in the appropriate directory structure.

----
==For GNU/Linux==
=== Get latest FoFiX ===
  # Open a terminal
  # Change to the directory in which you want to have FoFiX
  # Execute `svn checkout http://fofix.googlecode.com/svn/MFH-Mod/trunk/ FoFiX-SVN`
=== Install dependencies ===
You need to install those packages:
  * python2.4
  * python-pygame
  * python-opengl (= 2.x)
  * python-numpy
  * python-numeric
  * python-imaging
  * python-vorbis
  * python-xml

Optionally, if you are in 32bit you can also install python-psyco.

=== Running from sources ===
  # Change directory to `FoFiX-SVN/src`
  # Execute `python2.4 FretsOnFire.py`

=== Creating binaries ===
*Unless you want to distribute binaries of FoFiX this is really _not_ required.*

You first need to...
  # Install cxFreeze 3.0.3
  # Substitue line 16 of `/usr/lib/python2.4/site-packages/OpenGL/__init__.py` with `__version__ = "2.0.1.09"`.
  # Get the wiki pages by executing the following in the folder that contains `FoFiX-SVN`:
    * `svn checkout http://fofix.googlecode.com/svn/wiki FoFiX-wiki`

Then either create a patch or a full package.

==== Patch ====
  * Execute `make patch`.
==== Full package ====
  * Execute `make bindist`.
----